###########################
# Peace events Event
###########################

add_namespace = peaceevent


###Send peace to japan
country_event = {
  id = peaceevent.0
  title = "The End of War Draws Near"
  desc = "The Japanese are crumbling. But their navy remains an issue. We should probably seek a favourable end to the war."
  fire_only_once = yes
  trigger = {
    OR = {
      tag = FER
      tag = LES
      tag = SOV
      tag = BWR
      tag = TOW
    }
    at_war_with = JAP
      AND = { JAP = { owns_state = 909 } controls_state = 909 }
      AND = { JAP = { owns_state = 527 } controls_state = 527 }
      AND = { JAP = { owns_state = 908 } controls_state = 908 }
      AND = { JAP = { owns_state = 907 } controls_state = 907 }
      AND = { JAP = { owns_state = 525 } controls_state = 525 }
      AND = { JAP = { owns_state = 903 } controls_state = 903 }
      AND = { JAP = { owns_state = 906 } controls_state = 906 }
      AND = { JAP = { owns_state = 905 } controls_state = 905 }
      AND = { JAP = { owns_state = 904 } controls_state = 904 }
      AND = { JAP = { owns_state = 745 } controls_state = 745 }
      AND = { JAP = { owns_state = 743 } controls_state = 743 }
      AND = { JAP = { owns_state = 902 } controls_state = 902 }
  }
  mean_time_to_happen = { days = 1 }
  
  ###BACK OUT
  option = {
    name = "Send Peace Offer"
    JAP = { country_event = { id = peaceevent.1 days = 3 } }
    }

  ###Continue
  option = {
    ai_chance = { factor = 0 }
    name = "The Fight Will Continue"
  add_stability = -0.10
  add_war_support = -0.10
  add_political_power = -200
    }
  }

###Send peace to japan
country_event = {
  id = peaceevent.1
  title = "Russian Offer"
  desc = "The enemy has sent us a surprisingly easy peace offer, one that would be hard to refuse in context of our failures."
  fire_only_once = yes
  is_triggered_only = yes

  mean_time_to_happen = { days = 1 }
  
  ###BACK OUT
  option = {
    name = "The War is Lost"
    FROM = { country_event = { id = peaceevent.2 days = 3 } }
    }

  ###Continue
  option = {
    ai_chance = { factor = 0 }
    name = "Continue!"
    set_country_flag = jap_continue_fight
    FROM = { country_event = { id = peaceevent.2 days = 3 } }
    }
  }

###Send peace to japan
country_event = {
  id = peaceevent.2
  title = "The Japanese Response"
  desc = "...so, which is it? Did they yield?"
  fire_only_once = yes
  is_triggered_only = yes

  mean_time_to_happen = { days = 1 }
  
  ###Japs want peace
  option = {
    name = "Uraa!"
    trigger = {
      NOT = { JAP = { has_country_flag = jap_continue_fight } }
    }
    if = {
      limit = {
        JAP = { owns_state = 1232 }
      }
      transfer_state = 1232
    }
    if = {
      limit = {
        OR = {
          JVD = { owns_state = 408 }
          JAP = { owns_state = 408 }
        }
      }
      transfer_state = 408
    }
    if = {
      limit = {
        OR = {
          JVD = { owns_state = 409 }
          JAP = { owns_state = 409 }
        }
      }
      transfer_state = 409
    }
    white_peace = JAP
    if = {
      limit = {
        at_war_with = MAN
      }
      white_peace = MAN
    }
  }

  ###Japs hate peace
  option = {
    name = "...no way"
    trigger = {
      JAP = { has_country_flag = jap_continue_fight }
    }
    add_political_power = -10
    }
  }


  ###Poland allied USA, Send peace to USA
country_event = {
  id = peaceevent.3
  title = "The Polish Capitulation"
  desc = "The Polish military forces have been defeated and so, the Americans should no longer bother supporting them."
  fire_only_once = yes
  trigger = {
    at_war_with = USA
    USA = { has_country_flag = pol_usa_support }
    OR = {
      AND = {
        POL = { has_capitulated = yes }
        POL = { at_war_with = ROOT }
      }
      AND = {
        POL = { exists = no }
        ROOT = {  
          OR = {
            owns_state = 10
            owns_state = 865
            owns_state = 88
            owns_state = 92
            owns_state = 92
          }
        }
      }
    }
    ROOT = { surrender_progress < 0.1 }
  }
  mean_time_to_happen = { days = 1 }
  
  ###BACK OUT
  option = {
    name = "Send Peace Offer"
    USA = { country_event = { id = peaceevent.4 days = 3 } }
    }

  ###Continue
  option = {
    ai_chance = { factor = 0 }
    name = "The Fight Will Continue"
  add_stability = -0.10
  add_war_support = -0.10
  add_political_power = -200
    }
  }

###Send peace to america
country_event = {
  id = peaceevent.4
  title = "Polands Defeat"
  desc = "With fall of our ally in eastern europe, we now face the question of how shall we continue the war efforts?"
  fire_only_once = yes
  is_triggered_only = yes

  mean_time_to_happen = { days = 1 }
  
  ###BACK OUT
  option = {
    name = "The War is Lost"
    FROM = { country_event = { id = peaceevent.5 days = 3 } }
    }

  ###Continue
  option = {
    ai_chance = { factor = 0 }
    name = "Continue!"
    set_country_flag = usa_continue_fight
    FROM = { country_event = { id = peaceevent.5 days = 3 } }
    }
  }

###Send peace to americans
country_event = {
  id = peaceevent.5
  title = "The American Response"
  desc = "...so, which is it? Did they backdown?"
  fire_only_once = yes
  is_triggered_only = yes

  mean_time_to_happen = { days = 1 }
  
  ###america want peace
  option = {
    name = "Thank God"
    trigger = {
      NOT = { USA = { has_country_flag = usa_continue_fight } }
    }
      white_peace = USA
      hidden_effect = {
        every_country = {
          limit = { is_in_faction_with = ROOT }
          white_peace = FROM
          }
        every_country = {
            limit = { is_in_faction_with = FROM }
            white_peace = ROOT
            }
      }
  }

  ###america hate peace
  option = {
    name = "...no way"
    trigger = {
      USA = { has_country_flag = usa_continue_fight }
    }
    add_political_power = -10
    }
  }

    ###Ye are at war with French colonies but france is dead, Send peace to french colonies
country_event = {
  id = peaceevent.6
  title = "The French Capitulation"
  desc = "With the fall of the French state, we are in a akward state of affairs. The colonies are practicly unreachable, yet they are at war with us. We should attempt some sort of diplomatic move to resolve this matter."
  fire_only_once = yes
  trigger = {
    OR = {
      NOT = { at_war_with = POL }
      POL = { has_war_with = ROOT has_capitulated = yes }
    }
    OR = {
     ROOT = { at_war_with = SYR }
     ROOT = { at_war_with = FWA }
     ROOT = { at_war_with = FEA }
     ROOT = { at_war_with = FIC }
    }
    OR = {
      AND = {
        FRA = { has_capitulated = yes }
        FRA = { at_war_with = ROOT }
      }
      AND = {
        FRA = { exists = no }
        ROOT = {  
          OR = {
            owns_state = 16
            owns_state = 28
            owns_state = 19
            owns_state = 14
          }
        }
      }
    }
    ROOT = { surrender_progress < 0.1 }
  }
  mean_time_to_happen = { days = 1 }
  
  ###BACK OUT
  option = {
    name = "Send Peace Offer"
    if = {
      limit = {
        SYR = { exists = yes }
        SYR = { has_war_with = ROOT }
      }
      SYR = { country_event = { id = peaceevent.7 days = 3 } }
    }
    if = {
      limit = {
        FWA = { exists = yes }
        FWA = { has_war_with = ROOT }
      }
      FWA = { country_event = { id = peaceevent.7 days = 3 } }
    }
    if = {
      limit = {
        FEA = { exists = yes }
        FEA = { has_war_with = ROOT }
      }
      FEA = { country_event = { id = peaceevent.7 days = 3 } }
    }
    if = {
      limit = {
        FIC = { exists = yes }
        FIC = { has_war_with = ROOT }
      }
      FIC = { country_event = { id = peaceevent.7 days = 3 } }
    }
    }

  ###Continue
  option = {
    ai_chance = { factor = 0 }
    name = "The Fight Will Continue"
  add_stability = -0.10
  add_war_support = -0.10
  add_political_power = -200
    }
  }


###Send peace to french colonies
country_event = {
  id = peaceevent.7
  title = "Mainland Occupied"
  desc = "The Enemy has seized our homeland and is asking as to cease hostilities, so that war can be resolved faster."
  is_triggered_only = yes

  mean_time_to_happen = { days = 1 }
  
  ###BACK OUT
  option = {
    name = "The War is Lost"
    FROM = { country_event = { id = peaceevent.8 days = 3 } }

    }

  ###Continue
  option = {
    ai_chance = { factor = 0 }
    name = "Continue!"
    set_country_flag = fra_colonie_continue_fight
    FROM = { country_event = { id = peaceevent.8 days = 3 } }
    }
  }


###Send peace to French colonies
country_event = {
  id = peaceevent.8
  title = "The French Colonial Response"
  desc = "...so, which is it? Did they submit?"
  is_triggered_only = yes

  mean_time_to_happen = { days = 1 }
  
  ###COlonie want peace
  option = {
    name = "That saves us trouble"
    trigger = {
      NOT = { FROM = { has_country_flag = fra_colonie_continue_fight } }
    }
      white_peace = FROM
      hidden_effect = {
        every_country = {
          limit = { is_in_faction_with = ROOT }
          white_peace = FROM
          }
        every_country = {
            limit = { is_in_faction_with = FROM }
            white_peace = ROOT
            }
      }
  }

  ###COlonie hate peace
  option = {
    name = "...no way"
    trigger = {
      FROM = { has_country_flag = fra_colonie_continue_fight }
    }
    add_political_power = -10
    }
  }

 ###Ye are at war with Poland and it allied Italy, but italy does no border you, Send peace deal to Italy
 country_event = {
  id = peaceevent.9
  title = "The Polish Capitulation"
  desc = "With the fall of the Polish state, we are in a akward state of affairs. The Italy is practicly unreachable, yet they are at war with us. We should attempt some sort of diplomatic move to resolve this matter."
  fire_only_once = yes
  trigger = {
    NOT = {
      any_neighbor_country = {
        AND = {
          NOT = { tag = POL }
          is_neighbor_of = ROOT
          is_in_faction_with = ITA
        }
      }
    }
    at_war_with = ITA

    OR = {
      AND = {
        POL = { has_capitulated = yes }
        POL = { at_war_with = ROOT }
      }
      AND = {
        POL = { exists = no }
        ROOT = {  
          OR = {
            owns_state = 10
            owns_state = 865
            owns_state = 88
            owns_state = 92
            owns_state = 92
          }
        }
      }
    }
    ROOT = { surrender_progress < 0.1 }
  }
  mean_time_to_happen = { days = 1 }
  
  ###BACK OUT
  option = {
    name = "Send Peace Offer"
    if = {
      limit = {
        ITA = { exists = yes at_war_with = ROOT }
      }
      ITA = { country_event = { id = peaceevent.10 days = 3 } }
    }
    }

  ###Continue
  option = {
    ai_chance = { factor = 0 }
    name = "The Fight Will Continue"
  add_stability = -0.05
  add_war_support = -0.05
  add_political_power = -100
    }
  }


###Send peace to Italians
country_event = {
  id = peaceevent.10
  title = "The Fall of Poland"
  desc = "Our shared foe has defeated our ally but is seeking to end the war. Perhaps we should look the other way, and accept it?"
  fire_only_once = yes
  is_triggered_only = yes

  mean_time_to_happen = { days = 1 }
  
  ###BACK OUT
  option = {
    name = "The War is Lost"
    FROM = { country_event = { id = peaceevent.11 days = 3 } }

    }

  ###Continue
  option = {
    ai_chance = { factor = 0 }
    name = "Continue!"
    set_country_flag = ita_continue_fight
    FROM = { country_event = { id = peaceevent.11 days = 3 } }
    }
  }


###Send peace to Italians
country_event = {
  id = peaceevent.11
  title = "The Italian Response"
  desc = "...so, which is it? Did they agree?"
  fire_only_once = yes
  is_triggered_only = yes

  mean_time_to_happen = { days = 1 }
  
  ###Italians want peace
  option = {
    name = "Many lives were spared today."
    trigger = {
      NOT = { FROM = { has_country_flag = ita_continue_fight } }
    }
      white_peace = FROM
      hidden_effect = {
        every_country = {
          limit = { is_in_faction_with = ROOT }
          white_peace = FROM
          }
        every_country = {
            limit = { is_in_faction_with = FROM }
            white_peace = ROOT
            }
      }
  }

  ###Italians hate peace
  option = {
    name = "...no way"
    trigger = {
      FROM = { has_country_flag = ita_continue_fight }
    }
    add_political_power = -10
    }
  }

  

  
  

  
  